<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Entry Form</title>
    <!-- Bootstrap CSS -->
    <!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        label {
            font-weight: 700;
        }

        input,
        label,
        select {
            font-size: 70% !important;
        }
    </style>

    <script>

        const getWeather = (textField) => {

            // Define your API key, location, and the date you want to get the forecast for
            const apiKey = 'f201a1e4b5cf4e87a66103535240211';
            const loc = 'Nagpur';
            const date = textField.value // Replace with your desired date (YYYY-MM-DD)

            // Construct the API URL for the forecast
            const url = `https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${loc}&dt=${date}&aqi=no`;

            // Fetch the weather data
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Extract the forecast data for the day
                    const forecast = data.forecast.forecastday[0].day;

                    // Get the min, max temperature and weather condition description
                    const minTemp = Math.ceil(forecast.mintemp_c);
                    const maxTemp = Math.ceil(forecast.maxtemp_c);
                    const condition = forecast.condition.text;

                    document.getElementById("min_temp").value = minTemp
                    document.getElementById("max_temp").value = maxTemp
                    document.getElementById("forecast").value = condition

                })
                .catch(error => console.error('Error fetching weather data:', error));
        }

    </script>

</head>

<body>
    {% include "admin_user/menu.html" %}
    <div class="container mt-5">
        <!--    <h2 class="mb-4"></h2>-->

        <ul class="list-group">
            <li class="list-group-item bg-info display-6 text-white pb-3">
                Match Entry Form
            </li>
            <li class="list-group-item">
                <form method="POST" class="row g-3">
                    {% csrf_token %}

                    <!-- Match Type -->
                    <div class="col-md-6">
                        <label for="match_type" class="form-label">Match Type</label>
                        <select name="match_type" id="match_type" class="form-select" onchange="toggleFields()">
                            <option value="">Select Match Type</option>
                            <option value="Multidays">Multidays</option>
                            <option value="One Day">One Day</option>
                            <option value="T20">T20</option>
                        </select>
                    </div>

                    <!-- Tournament Name -->
                    <div class="col-md-6">
                        <label for="name_tournament" class="form-label">Name of Tournament</label>
                        <input type="text" name="name_tournament" value="{{match.2}}" placeholder="Tournament Name"
                            class="form-control" id="name_tournament">
                    </div>

                    <!-- Ground ID -->
                    <div class="col-md-6">
                        <label id="ground_id_label" class="bg-dark text-white px-3 py-1">Ground Id: {{match.12}}</label>
                        <input type="hidden" name="ground_id_text" id="ground_id_text" value="{{match.12}}" />
                        <br>
                        <label for="ground_id" class="form-label">Select Ground:</label>
                        <select id="ground_id" name="ground_id" class="form-control"></select>

                    </div>

                    <!-- Pitch ID -->
                    <div class="col-md-6">
                        <label id="pitch_id_label" class="bg-dark text-white px-3 py-1"></label>
                        <input type="hidden" name="pitch_id_text"  id="pitch_id_text" value="{{match.11}}" />
                        <br>
                        <label for="pitch_id" class="form-label">Select Pitch:</label>
                        <select id="pitch_id" name="pitch_id" class="form-control"></select>
                    </div>

                    <!-- Team 1 -->
                    <div class="col-md-6">
                        <label for="team1" class="form-label">Team 1</label>
                        <input type="text" name="team1" value="{{match.3}}" class="form-control" placeholder="Team Name"
                            id="team1">
                    </div>

                    <!-- Team 2 -->
                    <div class="col-md-6">
                        <label for="team2" class="form-label">Team 2</label>
                        <input type="text" name="team2" value="{{match.4}}" class="form-control" placeholder="Team Name"
                            id="team2">
                    </div>

                    <!-- Preparation Date -->
                    <div class="col-md-6">
                        <label for="preparation_date" class="form-label">Preparation Date</label>
                        <input type="date" value="{{match.5}}" onchange="getWeather(this)" name="preparation_date"
                            class="form-control" id="preparation_date">
                    </div>

                    <!-- Match Date / From Date / To Date -->
                    <div class="col-md-6" id="match-date-div">
                        <label for="match_date" class="form-label">Match Date</label>
                        <input type="date" value="{{match.6}}" name="match_date" class="form-control" id="match_date" {%if match.1 == 'Multidays' %}disabled{%endif%}>
                    </div>

                    <div class="col-md-6" id="match-date-div">
                        <label for="nuteral_curator" class="form-label">Nuteral Curator</label>
                        <input type="date" name="nuteral_curator" value="{{match.63}}" class="form-control" id="nuteral_curator">
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col">
                                    <label for="min_temp" class="form-label">Minimum Temprature °C</label>
                                    <input type="text" id="min_temp" value="{{match.16}}"
                                        placeholder="Minimum Temprature" name="min_temp" class="form-control">

                                </div>
                                <div class="col">
                                    <label for="max_temp" class="form-label">Maximum Temprature °C</label>
                                    <input type="text" placeholder="Maximum Temprature" id="max_temp" name="max_temp"
                                        value="{{match.17}}" class="form-control">

                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <label for="forecast" class="form-label">Forecast Prediction Available:</label>
                            <textarea id="forecast" name="forecast" placeholder="Forecast Prediction Available"
                                class="form-control">{{match.18}}</textarea>
                        </div>
                    </div>

                    <div class="col-md-6" id="from-date-div">
                        <label for="from_date" class="form-label">From Date</label>
                        <input type="date" name="from_date" value="{{match.7}}" class="form-control" id="from_date" {%if match.1 == 'One Day' or match.1 == 'T20' %}disabled{%endif%}>
                    </div>

                    <div class="col-md-6" id="to-date-div">
                        <label for="to_date" class="form-label">To Date</label>
                        <input type="date" name="to_date" value="{{match.8}}" class="form-control" id="to_date" {%if match.1 == 'One Day' or match.1 == 'T20' %}disabled{%endif%}>
                    </div>

                    <!-- Days Count -->
                    <div class="col-md-6">
                        <label for="days_count" class="form-label">Days Count</label>
                        <input type="number" name="days_count" readonly class="form-control" placeholder="Total days"
                            value="{{match.9}}" id="days_count" value="1">
                    </div>

                    <!-- Start Time -->
                    <div class="col-md-6">
                        <label for="start_time" class="form-label">Match Start Time</label>
                        <input type="time" name="start_time" value="{{match.10}}" class="form-control" id="start_time">
                    </div>




                    <!-- Is Pitch Level -->
                    <div class="col-md-6 form-check">
                        <input type="checkbox" name="is_pitch_level" class="form-check-input" id="is_pitch_level" {% if match.13 == "1" %}checked{% endif %}>
                        <label for="is_pitch_level" class="form-check-label">Is Pitch Level?</label>
                    </div>

                    <!-- Lawn Height -->
                    <div class="col-md-6">
                        <label for="lawn_height" class="form-label">Lawn Height (mm)</label>
                        <input type="number" name="lawn_height" value="{{match.14}}" step="0.01" class="form-control"
                            placeholder="Lawn Height" id="lawn_height">
                    </div>

                    <!-- Grass Cover -->
                    <div class="col-md-6">
                        <label for="grass_cover" class="form-label">Grass Cover</label>
                        <select name="grass_cover" class="form-select" id="grass_cover">
                            <option value="uniform">Uniform</option>
                            <option value="partially">Partially</option>
                            <option value="little/no grass">Little/No Grass</option>
                        </select>
                    </div>


                    <!-- Moisture Upto -->
                    <div class="col-md-6">
                        <label for="moisture_upto" class="form-label">Moisture Upto (inches)</label>
                        <input type="number" name="moisture_upto" value="{{match.19}}" step="0.01" class="form-control"
                            placeholder="Moisture Upto" id="moisture_upto">
                    </div>





                    <!-- Dew Factor -->
                    <div class="col-md-6">
                        <label for="dew_factor" class="form-label">Dew Factor</label>
                        <input type="text" name="dew_factor" value="{{match.20}}" class="form-control"
                            placeholder="Dew Factor" id="dew_factor">
                    </div>

                    <!-- Access Bounce -->
                    <div class="col-md-6">
                        <label for="access_bounce" class="form-label">Access Bounce/Clagg Hammer</label>
                        <input type="text" name="access_bounce" value="{{match.21}}" class="form-control"
                            placeholder="Access Bounce" id="access_bounce">
                    </div>


                    <hr class="mt-5 bg-info p-1">

                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item fs-4" role="presentation">
                            <button class="nav-link active" id="home-tab" data-bs-toggle="tab"
                                data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane"
                                aria-selected="true">
                                <u><b>Pitch Entry</b></u>
                            </button>
                        </li>
                        <li class="nav-item fs-4" role="presentation">
                            <button class="nav-link" id="profile-tab" data-bs-toggle="tab"
                                data-bs-target="#profile-tab-pane" type="button" role="tab"
                                aria-controls="profile-tab-pane" aria-selected="false">
                                <u><b>Outfield Entry</b></u>
                            </button>
                        </li>

                    </ul>

                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel"
                            aria-labelledby="home-tab" tabindex="0">
                            <div class="form-group border mt-4 text-dark p-3" style="background-color: #e0fbfc;">
                                <legend class="w-auto px-2">Pitch Entries</legend>

                                <div class="row">
                                    <div class="col-sm-12 col-lg-6">
                                        <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                            <legend class="w-auto px-2">Watering</legend>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="last_watering_on" class="form-label">Watering
                                                        On:</label>
                                                    <input type="date" id="last_watering_on" value="{{match.25}}"
                                                        name="last_watering_on" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="time_of_application" class="form-label">Time of
                                                        Watering:</label>
                                                    <input type="time" id="time_of_application"
                                                        name="time_of_application" value="{{match.27 }}"
                                                        class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="quantity_of_water" class="form-label">Quantity
                                                        of
                                                        Water:</label>
                                                    <input type="text" id="quantity_of_water" name="quantity_of_water"
                                                        value="{{match.26}}" class="form-control">
                                                </div>
                                            </div>
                                        </fieldset>

                                    </div>
                                    <div class="col-sm-12 col-lg-6">
                                         <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                            <legend class="w-auto px-2">Rolling</legend>
                                              <div>
                                                        <label for="roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="roller_machine_type"
                                                                name="roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-sm-12">
                                                    <label id="machinery_id_label"></label>
                                                    <br>
                                                    <label for="machinery_id" class="form-label">Select
                                                        Roller</label>
                                                    <input type="hidden" value="{{match.22}}" name="machinery_id"
                                                        id="machinery_id">
                                                    <input type="text" name="machinery_name" id="machinery_name"
                                                        class="form-control" readonly
                                                        placeholder="Click to select machinery">
                                                </div>
                                                <div class="col-lg-12 col-sm-12 d-flex">
                                                    <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                        style="font-size:70%"
                                                        onclick="openMachineryModal('roller')">Select
                                                        Machinery</button>

                                                </div>
<label for="roller_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="roller_machinery_name_operator"
                                                                    id="roller_machinery_name_operator" class="form-control">
 
                                            </div>
                                            <div class="col-md-12">
                                                <label for="time_of_application" class="form-label">Time of
                                                    Rolling:</label>
                                                <input type="time" id="time_of_application_roller" name="time_roller"
                                                    value="{{match.28}}" class="form-control">
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="rolling_speed" class="form-label">Rolling
                                                        Speed (km/hour):</label>
                                                    <input type="text" value="{{match.24}}" id="rolling_speed"
                                                        name="rolling_speed" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                  <div class="col-md-6">
                                                            <label for="passes-unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="passes_unit"
                                                                name="passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="passes">Passes</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                <div class="col-md-6">
                                                    <label for="no_of_passes" class="form-label">Number of
                                                        Passes:</label>
                                                    <input type="number" value="{{match.23}}" id="no_of_passes"
                                                        name="no_of_passes" class="form-control">
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>






                                <div class="row mt-4">
                                      <div>
                                                        <label for="mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="mover_machine_type"
                                                                name="mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                    <div class="col-lg-12 col-sm-12">
                                        <label id="mover_machinery_id_label"></label>
                                        <br>
                                        <label for="mover_machinery_id" class="form-label">Select
                                            Machinery/Mover</label>
                                        <input type="hidden" value="{{match.30}}" name="mover_machinery_id"
                                            id="mover_machinery_id">
                                        <input type="text" name="mover_machinery_name" id="mover_machinery_name"
                                            class="form-control" readonly placeholder="Click to select machinery">
                                    </div>
                                    <div class="col-lg-12 col-sm-12 d-flex">
                                        <button type="button" class="btn btn-dark mt-2 align-self-end"
                                            style="font-size:70%" onclick="openMachineryModal('mover')">Select
                                            Machinery</button>

                                    </div>
                                    <label for="mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="mover_machinery_name_operator"
                                                                    id="mover_machinery_name_operator" class="form-control">



                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="date_mowing_done_last" class="form-label"> 
                                            Last Mowing Date:</label>
                                        <input type="date" id="date_mowing_done_last" value="{{match.31}}"
                                            name="date_mowing_done_last" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="time_of_application_mover" class="form-label">Time of
                                            Application Mover:</label>
                                        <input type="time" id="time_of_application_mover" value="{{match.32}}"
                                            name="time_of_application_mover" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="mowing_done_at_mm" class="form-label">Mowing Height
                                            (mm):</label>
                                        <input type="number" id="mowing_done_at_mm" value="{{match.33}}"
                                            name="mowing_done_at_mm" class="form-control">
                                    </div>
                                </div>
                                 <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="moving_passes_unit" name="moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="mowing_duration"
                                                                    name="mowing_duration" class="form-control">
                                                            </div>
                                                            
                                                        </div>
                                <div class="row mt-3">
                                    <div class="col-sm-12 col-lg-6">
                                        <div class="input-group mb-3 border rounded">
                                            <div class="input-group-text bg-light border-0"
                                                style="background-color:white !important;">
                                                <input class="form-check-input mt-0 border-left" type="checkbox"
                                                    aria-label="Checkbox for following text input" {% if match.34 == "1" %}checked{% endif %} name="is_fertilizers_used"
                                                    id="is_fertilizers_used">
                                            </div>
                                            <input type="text" class="form-control border-0 mt-2"
                                                value="Is Fertilizers Used" style="background-color:white" readonly
                                                aria-label="Text input with checkbox">
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                <label for="time_of_application_chemical" class="form-label">Time of
                                                    Application Chemical:</label>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <input type="time" id="time_of_application_chemical"
                                            name="time_of_application_chemical" class="form-control" value="{{match.55}}">
                                            </div>
                                        </div>
                                        
                                       
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="fertilizers_details" class="form-label">Chemical
                                            Details:</label>
                                        <div class="row">
                                            <div class="col">
                                                <select id="fertilizers_details" name="fertilizers_details"
                                                    class="form-control">
                                                    <option value="">Select Any Chemical</option>
                                                  
                                                </select>
                                            </div>

                                            <div class="col">
                                                <input type="text" id="chemical_weight"
                                                    placeholder="Weight" name="chemical_weight"
                                                    class="form-control"  value="{{match.59}}">
                                            </div>

                                            <div class="col">
                                                <select id="fertilizers_unit"
                                                    name="fertilizers_unit"
                                                    class="form-control">
                                                    <option value="">Select Any Unit</option>
                                                    <option value="kg">KG</option>
                                                    <option value="gm">GM</option>
                                                    <option value="ltr">Liters</option>
                                                    <option value="ml">Milli Liters</option>
                                                    <option value="NA">NA</option>
                                                </select>
                                            </div>

                                            <div class="col">
                                                <input type="text" id="chemical_details_remark" placeholder="Remarks"
                                                    name="chemical_details_remark" class="form-control"
                                                    value="{{match.36}}">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="remark_by_groundsman" class="form-label">Remark by
                                            Groundsman:</label>
                                        <textarea id="remark_by_groundsman" placeholder="Remarks"
                                            name="remark_by_groundsman" class="form-control">{{match.37}}</textarea>
                                    </div>
                                </div>

                            </div>
                            <hr>
                        </div>

                        <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab"
                            tabindex="0">
                             <div class="form-group border mt-4 text-dark p-3" style="background-color:#7dcfb6">
                                <legend class="w-auto px-2">Outfield Entries</legend>




                                <div class="row">
                                    <div class="col-sm-12 col-lg-6">
                                         <fieldset class="form-group border mt-4 text-white p-3" style="background-color:#1d4e89">
                                            <legend class="w-auto px-2">Watering</legend>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="out_last_watering_on" class="form-label">Watering
                                                        On:</label>
                                                    <input type="date" id="out_last_watering_on" value="{{match.41}}"
                                                        name="out_last_watering_on" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="out_time_of_application" class="form-label">Time
                                                        of
                                                        Watering:</label>
                                                    <input type="time" id="out_time_of_application" value="{{match.43}}"
                                                        name="out_time_of_application" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="out_quantity_of_water" class="form-label">Quantity of
                                                        Water:</label>
                                                    <input type="text" id="out_quantity_of_water" value="{{match.42}}"
                                                        name="out_quantity_of_water" class="form-control">
                                                </div>
                                            </div>
                                        </fieldset>

                                    </div>
                                    <div class="col-sm-12 col-lg-6">
                                        <fieldset class="form-group border mt-4 text-white p-3"  style="background-color:#1d4e89">
                                            <legend class="w-auto px-2">Rolling</legend>
                                              <div>
                                                        <label for="out_roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="out_roller_machine_type"
                                                                name="out_roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-sm-12">
                                                    <label id="out_machinery_id_label"></label>
                                                    <br>
                                                    <label for="out_machinery_id" class="form-label">Select
                                                        Roller</label>
                                                    <input type="hidden" value="{{match.38}}" name="out_machinery_id"
                                                        id="out_machinery_id">
                                                    <input type="text" name="out_machinery_name" id="out_machinery_name"
                                                        class="form-control" readonly
                                                        placeholder="Click to select machinery">
                                                </div>
                                                <div class="col-lg-12 col-sm-12 d-flex">
                                                    <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                        style="font-size:70%"
                                                        onclick="openMachineryModal('out_roller')">Select
                                                        Machinery</button>

                                                </div>
   <label for="out_roller_machinery_name_operator" class="form-label">
                            Operator Name:
                        </label>
                                                             <input type="text" name="out_roller_machinery_name_operator"
                                                                    id="out_roller_machinery_name_operator" class="form-control">


                                            </div>
                                            <div class="col-md-12">
                                                <label for="out_time_of_application" class="form-label">Time of
                                                    Rolling:</label>
                                                <input type="time" id="out_time_of_application_roller"
                                                    value="{{match.44}}" name="out_time_roller" class="form-control">
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label for="out_rolling_speed" class="form-label">Rolling
                                                        Speed:</label>
                                                    <input type="number" id="out_rolling_speed" value="{{match.40}}"
                                                        name="out_rolling_speed" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                  <div class="col-md-6">
                                                            <label for="out_passes-unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="out_passes_unit"
                                                                name="out_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="passes">Passes</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>

                                                           
                                                        </div>
                                                <div class="col-md-6">
                                                    <label for="out_no_of_passes" class="form-label">Number of
                                                        Passes:</label>
                                                    <input type="number" id="out_no_of_passes" value="{{match.39}}"
                                                        name="out_no_of_passes" class="form-control">
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>



                                <div class="row mt-4">
                                       <div>
                                                        <label for="out_mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="out_mover_machine_type"
                                                                name="out_mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                    <div class="col-lg-12 col-sm-12">
                                        <label id="out_mover_machinery_id_label"></label>
                                        <br>
                                        <label for="out_mover_machinery_id" class="form-label">Select
                                            Machinery/Mover</label>
                                        <input type="hidden" value="{{match.46}}" name="out_mover_machinery_id"
                                            id="out_mover_machinery_id">
                                        <input type="text" name="out_mover_machinery_name" id="out_mover_machinery_name"
                                            class="form-control" readonly placeholder="Click to select machinery">
                                    </div>
                                    <div class="col-lg-12 col-sm-12 d-flex">
                                        <button type="button" class="btn btn-dark mt-2 align-self-end"
                                            style="font-size:70%" onclick="openMachineryModal('out_mover')">Select
                                            Machinery</button>

                                    </div>
<label for="out_mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="out_mover_machinery_name_operator"
                                                                    id="out_mover_machinery_name_operator" class="form-control">



                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="out_date_mowing_done_last" class="form-label">Last Mowing Date:</label>
                                        <input type="date" id="out_date_mowing_done_last" value="{{match.47}}"
                                            name="out_date_mowing_done_last" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="out_time_of_application_mover" class="form-label">Time of
                                            Application Mover:</label>
                                        <input type="time" id="out_time_of_application_mover" value="{{match.48}}"
                                            name="out_time_of_application_mover" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="out_mowing_done_at_mm" class="form-label">Mowing Height
                                            (mm):</label>
                                        <input type="number" id="out_mowing_done_at_mm" value="{{match.49}}"
                                            name="out_mowing_done_at_mm" class="form-control">
                                    </div>
                                </div>
                                  <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="out_moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="out_moving_passes_unit" name="out_moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="out_mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="out_mowing_duration"
                                                                    name="out_mowing_duration" class="form-control">
                                                            </div>
                                                            
                                                        </div>
                                <div class="row mt-3">
                                    <div class="col-sm-12 col-lg-6">
                                        <div class="input-group mb-3 border rounded">
                                            <div class="input-group-text bg-light border-0"
                                                style="background-color:white !important;">
                                                <input class="form-check-input mt-0 border-left" type="checkbox"
                                                    aria-label="Checkbox for following text input"
                                                    name="out_is_fertilizers_used" {% if match.50 == "1" %}checked{% endif %}
                                                    id="out_is_fertilizers_used">
                                            </div>
                                            <input type="text" class="form-control border-0 mt-2"
                                                value="Is Fertilizers Used" style="background-color:white" readonly
                                                aria-label="Text input with checkbox">
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                <label for="out_time_of_application_chemical" class="form-label">Time of
                                                    Application Chemical:</label>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <input type="time" id="out_time_of_application_chemical"
                                            name="out_time_of_application_chemical" class="form-control" value="{{match.56}}">
                                            </div>
                                        </div>
                                        
                                       
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="out_fertilizers_details" class="form-label">Chemical
                                            Details:</label>
                                        <div class="row">
                                            <div class="col">
                                                <select id="out_fertilizers_details" name="out_fertilizers_details"
                                                    class="form-control">
                                                    <option value="">Select Any Chemical</option>
                                                 
                                                </select>
                                            </div>
                                            <div class="col">
                                                <input type="text" id="out_chemical_weight" placeholder="Weight"
                                                    name="out_chemical_weight" class="form-control"  value="{{match.61}}">
                                            </div>
                                            <div class="col">
                                                <select id="out_fertilizers_unit" name="out_fertilizers_unit"
                                                    class="form-control">
                                                    <option value="">Select Any Unit</option>
                                                    <option value="kg">KG</option>
                                                    <option value="gm">GM</option>
                                                    <option value="ltr">Liters</option>
                                                    <option value="ml">Milli Liters</option>
                                                    <option value="NA">NA</option>
                                                </select>
                                            </div>
                                          


                                            <div class="col">
                                                <input type="text" id="out_chemical_details_remark"
                                                    placeholder="Remarks" name="out_chemical_details_remark"
                                                    value="{{match.52}}" class="form-control">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="out_remark_by_groundsman" class="form-label">Remark by
                                            Groundsman:</label>
                                        <textarea id="out_remark_by_groundsman" placeholder="Remarks"
                                            name="out_remark_by_groundsman" class="form-control">{{match.53}}</textarea>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>




                    <div class="row">
                        <div class="col-md-12">
                            <label for="brief_match_pitch_assessment" class="form-label">Brief Assessment of the match
                                pitch:</label>
                            <textarea placeholder="Brief Assessment of the match pitch" type="text"
                                id="brief_match_pitch_assessment" name="brief_match_pitch_assessment"
                                class="form-control">{{match.54}}</textarea>
                        </div>
                    </div>


                    <div class="col-12">
                        <button type="submit" name="btnSubmit" value="update" class="btn btn-primary">Update</button>
                        <button type="submit" name="btnSubmit" value="save" class="btn btn-primary">Save New</button>
                    </div>
                </form>
            </li>
        </ul>

    </div>

    <!-- Machinery Selection Modal -->
    <div class="modal fade" id="machineryModal" tabindex="-1" aria-labelledby="machineryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="machineryModalLabel">Select Machinery</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Equipment Type</th>
                                <th>Details</th>
                               
                              
                                
                            </tr>
                        </thead>
                        <tbody id="machineryList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <!-- Custom Scripts -->
    <script>


        
function toggleFields() {
            var matchType = document.getElementById('match_type').value;
            if (matchType === 'Multidays') {
                document.getElementById('from_date').style.display = "block";
                document.getElementById('to_date').style.display = "block";
                document.getElementById('match_date').style.display = "none"
                $(document).ready(function () {
                    $("#to-date-div").css("display", "block")
                    $("#from-date-div").css("display", "block")
                    $("#match-date-div").css("display", "none")
                })
                document.getElementById('from_date').disabled = false;
                document.getElementById('to_date').disabled = false;
                document.getElementById('match_date').disabled = true;
            } else {
                $(document).ready(function () {

                    $("#days_count").val("1")
                    $("#from_date").val("")
                    $("#to_date").val("")
                    $("#to-date-div").css("display", "none")
                    $("#from-date-div").css("display", "none")
                    $("#match-date-div").css("display", "block")
                })
                document.getElementById('from_date').style.display = "none";
                document.getElementById('to_date').style.display = "none";
                document.getElementById('match_date').style.display = "block";
                document.getElementById('from_date').disabled = true;
                document.getElementById('to_date').disabled = true;
                document.getElementById('match_date').disabled = false;
            }
        }

        function toggleRollerOptions() {
            var rollerType = document.getElementById('roller_type').value;
            if (rollerType === 'manually') {
                document.getElementById('roller_weight_div').style.display = 'block';
            } else {
                document.getElementById('roller_weight_div').style.display = 'none';
            }
        }
    </script>

    <!-- Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>



        $(document).ready(function () {
            axios.get("/usr_admin/get_grounds").then((result) => {
                $("#ground_id").html("")
                $("#ground_id").append(`<option value=''>Select Ground</option>`)
                //                $("#ground_id").append(`<option value='all'>All Grounds</option>`)

                result.data.grounds.forEach(function (g) {
                    $("#ground_id").append(`<option value='${g.ground[0]}'>${g.ground[6]}</option>`)
                })

            }).catch((error) => {
                console.log(error)

            })


            function getMachinery(id, label) {
                axios.get("/usr_admin/machinery/" + id).then((result) => {

                    const m = result.data.machinery
                    $(`#${label}`).text(`ID: ${m.id} Equipment :${m.equipment_name} ${m.print_details}`)
                    $(`#${label}`).addClass("bg-dark text-white p-2")



                }).catch((error) => {
                    console.log(error)

                })
            }

            getMachinery("{{match.22}}", "machinery_id_label")
            getMachinery("{{match.30}}", "mover_machinery_id_label")
            getMachinery("{{match.38}}", "out_machinery_id_label")
            getMachinery("{{match.46}}", "out_mover_machinery_id_label")

            // Function to calculate the difference in days between two dates
            function calculateDays() {

                var fromDate = $('#from_date').val();
                var toDate = $('#to_date').val();

                // Ensure both dates are selected
                if (fromDate && toDate) {
                    var from = new Date(fromDate);
                    var to = new Date(toDate);

                    // Calculate the difference in milliseconds and convert to days
                    var timeDiff = to - from;
                    var daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)) + 1;  // +1 to include the start date

                    // Update the days_count field with the calculated days
                    $('#days_count').val(daysDiff);
                } else {
                    // Reset to default if dates are not selected
                    $('#days_count').val(1);
                }
            }

            // Trigger calculation on date change
            $('#from_date, #to_date').on('change', calculateDays);
        })

        $("#out_is_fertilizers_used").change(function () {
            if ($(this).prop("checked") === true) {
                $("#out_fertilizers_details").prop("required", true)
            }
            else {
                $("#out_fertilizers_details").prop("required", false)
            }


        });
        $("#is_fertilizers_used").change(function () {
            if ($(this).prop("checked") === true) {
                $("#fertilizers_details").prop("required", true)
            }
            else {
                $("#fertilizers_details").prop("required", false)
            }


        });


        function addChemicalsToSelect(fertilizers, select) {
            fertilizers.forEach(function (fert) {
                const option = document.createElement("option");
                option.value = fert.id;
                option.textContent = `${fert.name} (${fert.type})`;
                select.appendChild(option);
            });
        }

        axios.get('/usr_admin/get-fertilizers-json/')
            .then(function (response) {
                const fertilizers = response.data.fertilizers;
                const select = document.getElementById("fertilizers_details");
                // const ppSelect = document.getElementById("pp_fertilizers_details");
                const outSelect = document.getElementById("out_fertilizers_details");
                // const practiceSelect = document.getElementById("practice_fertilizers_details");
                addChemicalsToSelect(fertilizers, select)
                // addChemicalsToSelect(fertilizers, ppSelect)
                addChemicalsToSelect(fertilizers, outSelect)
                // addChemicalsToSelect(fertilizers, practiceSelect)

            })
            .catch(function (error) {
                console.error("Error fetching fertilizers:", error);
            });



        $("#ground_id").change(function () {
            const groundId = $(this).val().trim()
            $("#ground_id_text").val(groundId)
            if (groundId == "all") {
                axios.get(`/usr_admin/get_all_pitches`).then((result) => {
                    // console.log(result.data.grounds)
                    $("#pitch_id").html("")
                    $("#pitch_id").append(`<option value=''>Select Pitch</option>`)
                    //                    $("#pitch_id").append(`<option value='all'>All Pitches</option>`)

                    result.data.grounds.forEach(function (p) {
                        $("#pitch_id").append(`<option value='${p.pitches[0]}'>${p.pitches[14]}  ${p.pitches[5]}</option>`)
                    })
                }).catch((error) => {
                    console.log(error)

                })
            } else {
                axios.get(`/usr_admin/get_pitches/${groundId}`).then((result) => {
                    console.log(result.data.grounds)
                    $("#pitch_id").html("")
                    $("#pitch_id").append(`<option value=''>Select Pitch</option>`)
                    //                    $("#pitch_id").append(`<option value='all'>All Pitches</option>`)

                    result.data.grounds.forEach(function (p) {
                        $("#pitch_id").append(`<option value='${p.pitch[0]}'>${p.pitch[14]}  ${p.pitch[5]}</option>`)
                    })
                }).catch((error) => {
                    console.log(error)

                })
            }

        })

        $("#pitch_id").change(function () {


            const pitchId = $(this).val().trim()
            const groundId = $("#ground_id").val().trim()

            $("#pitch_id_text").val(pitchId)
            $("#ground_id_text").val(groundId)

            if (pitchId !== "all") {

                axios.get(`/usr_admin/get_pitch/${pitchId}`).then((result) => {
                    const pitch = result.data.grounds[0].pitch

                    console.log(pitch)
                    $("#pitch_location").prop("disabled", false)
                    $("#pitch_location").prop("readonly", true)
                    $("#pitch_location").val(pitch[1])

                }).catch((error) => {
                    console.log(error)

                })
            } else if (pitchId === "all") {
                $("#pitch_location").prop("disabled", true)
            }
        })



    </script>


</body>


<script>
    $(document).ready(function () {

        $("#match_type").val("{{match.1}}")
        $("#fertilizers_details").val("{{match.35|default:''}}")
        $("#out_fertilizers_details").val("{{match.51|default:''}}")

        $("#fertilizers_unit").val("{{match.60|default:''}}")
        $("#out_fertilizers_unit").val("{{match.62|default:''}}")



        axios.get(`/usr_admin/get_pitch/{{match.11}}`).then((result) => {
                            const pitch = result.data.grounds[0].pitch
        
                            // console.log(pitch)
                            if(pitch[4]=="0")
                            {
                                $("#pitch_id_label").html("Pitch type="+pitch[5]+" Location="+pitch[14])

                            }
                            else
                            {
                                $("#pitch_id_label").html("pitch no="+pitch[4]+" pitch location="+pitch[14]+" "+pitch[5])
                            }
                           
        
                        }).catch((error) => {
                            console.log(error)
        
                        })


                        axios.get(`/usr_admin/get_ground/{{match.12}}`).then((result) => {
                            const ground = result.data.ground
        
                            // console.log(pitch)
                          
                                $("#ground_id_label").html(ground[6])

                           
                            
                           
        
                        }).catch((error) => {
                            console.log(error)
        
                        })
    })
</script>

</html>